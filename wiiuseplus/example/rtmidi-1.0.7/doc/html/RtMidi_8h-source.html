<HTML>
<HEAD>
<TITLE>The RtMidi Tutorial</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<a class="qindex" href="index.html">Tutorial</a> &nbsp; <a class="qindex" href="annotated.html">Class/Enum List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </CENTER>
<HR>
<!-- Generated by Doxygen 1.4.4 -->
<h1>RtMidi.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************/</span>
<a name="l00036"></a>00036 <span class="comment">/**********************************************************************/</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">// RtMidi: Version 1.0.7</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#ifndef RTMIDI_H</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#define RTMIDI_H</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="preprocessor">#include "RtError.h"</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a><a class="code" href="classRtMidi.html">00046</a> <span class="keyword">class </span><a class="code" href="classRtMidi.html">RtMidi</a>
<a name="l00047"></a>00047 {
<a name="l00048"></a>00048  <span class="keyword">public</span>:
<a name="l00049"></a>00049 
<a name="l00051"></a>00051   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRtMidi.html#a0">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 ) = 0;
<a name="l00052"></a>00052 
<a name="l00054"></a>00054   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRtMidi.html#a1">openVirtualPort</a>( <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">"RtMidi"</span> ) ) = 0;
<a name="l00055"></a>00055 
<a name="l00057"></a>00057   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidi.html#a2">getPortCount</a>() = 0;
<a name="l00058"></a>00058 
<a name="l00060"></a>00060   <span class="keyword">virtual</span> std::string <a class="code" href="classRtMidi.html#a3">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 ) = 0;
<a name="l00061"></a>00061 
<a name="l00063"></a>00063   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRtMidi.html#a4">closePort</a>( <span class="keywordtype">void</span> ) = 0;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065  <span class="keyword">protected</span>:
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   <a class="code" href="classRtMidi.html">RtMidi</a>();
<a name="l00068"></a>00068   <span class="keyword">virtual</span> ~<a class="code" href="classRtMidi.html">RtMidi</a>() {};
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="comment">// A basic error reporting function for internal use in the RtMidi</span>
<a name="l00071"></a>00071   <span class="comment">// subclasses.  The behavior of this function can be modified to</span>
<a name="l00072"></a>00072   <span class="comment">// suit specific needs.</span>
<a name="l00073"></a>00073   <span class="keywordtype">void</span> error( <a class="code" href="classRtError.html#w11">RtError::Type</a> type );
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <span class="keywordtype">void</span> *apiData_;
<a name="l00076"></a>00076   <span class="keywordtype">bool</span> connected_;
<a name="l00077"></a>00077   std::string errorString_;
<a name="l00078"></a>00078 };
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">/**********************************************************************/</span>
<a name="l00096"></a>00096 <span class="comment">/**********************************************************************/</span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00099"></a>00099 <span class="preprocessor">#include &lt;queue&gt;</span>
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="classRtMidiIn.html">00101</a> <span class="keyword">class </span><a class="code" href="classRtMidiIn.html">RtMidiIn</a> : <span class="keyword">public</span> <a class="code" href="classRtMidi.html">RtMidi</a>
<a name="l00102"></a>00102 {
<a name="l00103"></a>00103  <span class="keyword">public</span>:
<a name="l00104"></a>00104 
<a name="l00106"></a><a class="code" href="classRtMidiIn.html#w0">00106</a>   <span class="keyword">typedef</span> void (*<a class="code" href="classRtMidiIn.html#w0">RtMidiCallback</a>)( <span class="keywordtype">double</span> timeStamp, std::vector&lt;unsigned char&gt; *message, <span class="keywordtype">void</span> *userData);
<a name="l00107"></a>00107 
<a name="l00109"></a>00109 
<a name="l00112"></a>00112   <a class="code" href="classRtMidiIn.html#a0">RtMidiIn</a>();
<a name="l00113"></a>00113 
<a name="l00115"></a>00115   <a class="code" href="classRtMidiIn.html#a1">~RtMidiIn</a>();
<a name="l00116"></a>00116 
<a name="l00118"></a>00118 
<a name="l00122"></a>00122   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a2">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
<a name="l00123"></a>00123 
<a name="l00125"></a>00125 
<a name="l00131"></a>00131   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a3">openVirtualPort</a>( <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">"RtMidi Input"</span> ) );
<a name="l00132"></a>00132 
<a name="l00134"></a>00134 
<a name="l00140"></a>00140   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a4">setCallback</a>( <a class="code" href="classRtMidiIn.html#w0">RtMidiCallback</a> callback, <span class="keywordtype">void</span> *userData = 0 );
<a name="l00141"></a>00141 
<a name="l00143"></a>00143 
<a name="l00147"></a>00147   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a5">cancelCallback</a>();
<a name="l00148"></a>00148 
<a name="l00150"></a>00150   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a6">closePort</a>( <span class="keywordtype">void</span> );
<a name="l00151"></a>00151 
<a name="l00153"></a>00153   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidiIn.html#a7">getPortCount</a>();
<a name="l00154"></a>00154 
<a name="l00156"></a>00156 
<a name="l00159"></a>00159   std::string <a class="code" href="classRtMidiIn.html#a8">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
<a name="l00160"></a>00160 
<a name="l00162"></a>00162 
<a name="l00166"></a>00166   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a9">setQueueSizeLimit</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queueSize );
<a name="l00167"></a>00167 
<a name="l00169"></a>00169 
<a name="l00176"></a>00176   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a10">ignoreTypes</a>( <span class="keywordtype">bool</span> midiSysex = <span class="keyword">true</span>, <span class="keywordtype">bool</span> midiTime = <span class="keyword">true</span>, <span class="keywordtype">bool</span> midiSense = <span class="keyword">true</span> );
<a name="l00177"></a>00177 
<a name="l00179"></a>00179 
<a name="l00186"></a>00186   <span class="keywordtype">double</span> <a class="code" href="classRtMidiIn.html#a11">getMessage</a>( std::vector&lt;unsigned char&gt; *message );
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   <span class="comment">// A MIDI structure used internally by the class to store incoming</span>
<a name="l00189"></a>00189   <span class="comment">// messages.  Each message represents one and only one MIDI message.</span>
<a name="l00190"></a>00190   <span class="keyword">struct </span>MidiMessage { 
<a name="l00191"></a>00191     std::vector&lt;unsigned char&gt; bytes; 
<a name="l00192"></a>00192     <span class="keywordtype">double</span> timeStamp;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     <span class="comment">// Default constructor.</span>
<a name="l00195"></a>00195     MidiMessage()
<a name="l00196"></a>00196       :bytes(3), timeStamp(0.0) {}
<a name="l00197"></a>00197   };
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <span class="comment">// The RtMidiInData structure is used to pass private class data to</span>
<a name="l00200"></a>00200   <span class="comment">// the MIDI input handling function or thread.</span>
<a name="l00201"></a>00201   <span class="keyword">struct </span>RtMidiInData {
<a name="l00202"></a>00202     std::queue&lt;MidiMessage&gt; queue;
<a name="l00203"></a>00203     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queueLimit;
<a name="l00204"></a>00204     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ignoreFlags;
<a name="l00205"></a>00205     <span class="keywordtype">bool</span> doInput;
<a name="l00206"></a>00206     <span class="keywordtype">bool</span> firstMessage;
<a name="l00207"></a>00207     <span class="keywordtype">void</span> *apiData;
<a name="l00208"></a>00208     <span class="keywordtype">bool</span> usingCallback;
<a name="l00209"></a>00209     <span class="keywordtype">void</span> *userCallback;
<a name="l00210"></a>00210     <span class="keywordtype">void</span> *userData;
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     <span class="comment">// Default constructor.</span>
<a name="l00213"></a>00213     RtMidiInData()
<a name="l00214"></a>00214       : queueLimit(1024), ignoreFlags(7), doInput(false), firstMessage(true),
<a name="l00215"></a>00215         apiData(0), usingCallback(false), userCallback(0), userData(0) {}
<a name="l00216"></a>00216   };
<a name="l00217"></a>00217 
<a name="l00218"></a>00218  <span class="keyword">private</span>:
<a name="l00219"></a>00219 
<a name="l00220"></a>00220   <span class="keywordtype">void</span> initialize( <span class="keywordtype">void</span> );
<a name="l00221"></a>00221   RtMidiInData inputData_;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 };
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="comment">/**********************************************************************/</span>
<a name="l00237"></a>00237 <span class="comment">/**********************************************************************/</span>
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="classRtMidiOut.html">00239</a> <span class="keyword">class </span><a class="code" href="classRtMidiOut.html">RtMidiOut</a> : <span class="keyword">public</span> <a class="code" href="classRtMidi.html">RtMidi</a>
<a name="l00240"></a>00240 {
<a name="l00241"></a>00241  <span class="keyword">public</span>:
<a name="l00242"></a>00242 
<a name="l00244"></a>00244 
<a name="l00247"></a>00247   <a class="code" href="classRtMidiOut.html#a0">RtMidiOut</a>();
<a name="l00248"></a>00248 
<a name="l00250"></a>00250   <a class="code" href="classRtMidiOut.html#a1">~RtMidiOut</a>();
<a name="l00251"></a>00251 
<a name="l00253"></a>00253 
<a name="l00259"></a>00259   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a2">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
<a name="l00260"></a>00260 
<a name="l00262"></a>00262   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a3">closePort</a>();
<a name="l00263"></a>00263 
<a name="l00265"></a>00265 
<a name="l00273"></a>00273   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a4">openVirtualPort</a>( <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">"RtMidi Output"</span> ) );
<a name="l00274"></a>00274 
<a name="l00276"></a>00276   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidiOut.html#a5">getPortCount</a>();
<a name="l00277"></a>00277 
<a name="l00279"></a>00279 
<a name="l00282"></a>00282   std::string <a class="code" href="classRtMidiOut.html#a6">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
<a name="l00283"></a>00283 
<a name="l00285"></a>00285 
<a name="l00289"></a>00289   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a7">sendMessage</a>( std::vector&lt;unsigned char&gt; *message );
<a name="l00290"></a>00290 
<a name="l00291"></a>00291  <span class="keyword">private</span>:
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordtype">void</span> initialize( <span class="keywordtype">void</span> );
<a name="l00294"></a>00294 };
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="preprocessor">#endif</span>
</pre></div><HR>

<table><tr><td><img src="../images/mcgill.gif" width=165></td>
  <td>&copy;2003-2007 Gary P. Scavone, McGill University. All Rights Reserved.<br>
  Maintained by Gary P. Scavone, gary at music.mcgill.ca</td></tr>
</table>

</BODY>
</HTML>
